{"ast":null,"code":"var _jsxFileName = \"/home/sofy/Escritorio/ProyectoDeclarativa/src/components/App.js\";\nimport React from \"react\";\nimport RegisterForm from './RegisterForm';\nimport RegisterTable from './RegisterTable';\nimport API from '../utils/APIConstants';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      student_list: []\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"\".concat(API.BaseUrl, \"/register\"), {\n      headers: {\n        Accept: \"application/json\"\n      }\n    }).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n      this.setState({\n        student_list: res ? res : []\n      });\n    }).catch(err => {\n      alert(\"Ocurrió un error en la conexión\");\n    });\n  }\n\n  handleSubmit(student) {\n    let request = {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        carnet: student.carnet,\n        schedule: student.schedule,\n        isLate: student.isLate\n      })\n    };\n    fetch(\"\".concat(API.BaseUrl, \"/register\"), request).then(res => {\n      return res.json();\n    }).then(res => {\n      let buffer_list = this.state.student_list.slice();\n      this.setState({\n        student_list: buffer_list.concat([res.register])\n      });\n    }).catch(err => {\n      alert(\"Ocurrió un error en la conexión\");\n    });\n  }\n\n  handleDelete(student) {\n    let request = {\n      method: \"DELETE\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        _id: student._id\n      })\n    };\n    fetch(\"\".concat(API.BaseUrl, \"/register\"), request).then(res => res.json()).then(res => {\n      let index = this.state.student_list.find(value => {\n        return value._id === student._id;\n      });\n      let buffer_list = this.state.student_list.slice();\n      buffer_list.splice(index, 1);\n      this.setState({\n        student_list: buffer_list\n      });\n    }).catch(err => {});\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        \"marginTop\": 2 + \"em\",\n        \"marginBottom\": 2 + \"em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(RegisterForm, {\n      onSubmit: student => {\n        this.handleSubmit(student);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(RegisterTable, {\n      list: this.state.student_list,\n      onDelete: student => this.handleDelete(student),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/sofy/Escritorio/ProyectoDeclarativa/src/components/App.js"],"names":["React","RegisterForm","RegisterTable","API","App","Component","constructor","props","state","student_list","componentDidMount","fetch","BaseUrl","headers","Accept","then","res","json","console","log","setState","catch","err","alert","handleSubmit","student","request","method","body","JSON","stringify","carnet","schedule","isLate","buffer_list","slice","concat","register","handleDelete","_id","index","find","value","splice","render"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport RegisterForm from './RegisterForm'\nimport RegisterTable from './RegisterTable'\nimport API from '../utils/APIConstants'\n\nclass App extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            student_list:[],\n        }\n    }\n\n    componentDidMount(){\n        fetch(`${API.BaseUrl}/register`, {\n            headers:{\n                Accept: \"application/json\"\n            }\n        })\n            .then(res=>{\n                return res.json();\n            })\n            .then(res=>{\n                console.log(res)\n                this.setState({\n                    student_list: res?res:[],\n                })\n            })\n            .catch(err=>{\n                alert(\"Ocurrió un error en la conexión\");\n            })\n    }\n\n    handleSubmit(student){\n        let request = {\n            method: \"POST\",\n            headers:{\n                \"Content-type\":\"application/json\",\n                \"Accept\":\"application/json\",\n            },\n            body: JSON.stringify({\n                carnet: student.carnet,\n                schedule: student.schedule,\n                isLate: student.isLate,\n            })\n        }\n\n        fetch(`${API.BaseUrl}/register`, request)\n            .then(res=>{\n                return res.json();\n            })\n            .then(res=>{\n                let buffer_list = this.state.student_list.slice();\n                this.setState({\n                    student_list: buffer_list.concat([res.register]),\n                })\n            })  \n            .catch(err=>{\n                alert(\"Ocurrió un error en la conexión\");\n            });\n    }\n\n    handleDelete(student){\n        let request = {\n            method: \"DELETE\",\n            headers:{\n                \"Content-type\":\"application/json\",\n                \"Accept\":\"application/json\",\n            },\n            body: JSON.stringify({\n                _id: student._id,\n            }) \n        }\n\n        fetch(`${API.BaseUrl}/register`, request)\n            .then(res=>res.json())\n            .then(res=>{\n                let index = this.state.student_list.find(value=>{\n                    return value._id === student._id;\n                })\n        \n                let buffer_list = this.state.student_list.slice();\n                buffer_list.splice(index, 1);\n        \n                this.setState({\n                    student_list: buffer_list\n                });\n            })\n            .catch(err=>{\n\n            })\n    }\n    \n    render(){\n        return (\n            <div className=\"container\" style={{\"marginTop\":2+\"em\", \"marginBottom\":2+\"em\"}}>\n                <RegisterForm \n                    onSubmit = {(student)=>{\n                        this.handleSubmit(student);\n                    }}\n                />\n                <RegisterTable \n                    list={this.state.student_list}\n                    onDelete={(student)=>this.handleDelete(student)}\n                    />\n            </div>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}