{"ast":null,"code":"import _classCallCheck from\"/home/sofy/Escritorio/ProyectoDeclarativa/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/sofy/Escritorio/ProyectoDeclarativa/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/sofy/Escritorio/ProyectoDeclarativa/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/sofy/Escritorio/ProyectoDeclarativa/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/sofy/Escritorio/ProyectoDeclarativa/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import RegisterForm from'./RegisterForm';import RegisterTable from'./RegisterTable';import API from'../utils/APIConstants';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={student_list:[]};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"\".concat(API.BaseUrl,\"/register\"),{headers:{Accept:\"application/json\"}}).then(function(res){return res.json();}).then(function(res){console.log(res);_this2.setState({student_list:res?res:[]});}).catch(function(err){alert(\"Ocurrió un error en la conexión\");});}},{key:\"handleSubmit\",value:function handleSubmit(student){var _this3=this;var request={method:\"POST\",headers:{\"Content-type\":\"application/json\",\"Accept\":\"application/json\"},body:JSON.stringify({carnet:student.carnet,schedule:student.schedule,isLate:student.isLate})};fetch(\"\".concat(API.BaseUrl,\"/register\"),request).then(function(res){return res.json();}).then(function(res){var buffer_list=_this3.state.student_list.slice();_this3.setState({student_list:buffer_list.concat([res.register])});}).catch(function(err){alert(\"Ocurrió un error en la conexión\");});}},{key:\"handleDelete\",value:function handleDelete(student){var _this4=this;var request={method:\"DELETE\",headers:{\"Content-type\":\"application/json\",\"Accept\":\"application/json\"},body:JSON.stringify({_id:student._id})};fetch(\"\".concat(API.BaseUrl,\"/register\"),request).then(function(res){return res.json();}).then(function(res){var index=_this4.state.student_list.find(function(value){return value._id===student._id;});var buffer_list=_this4.state.student_list.slice();buffer_list.splice(index,1);_this4.setState({student_list:buffer_list});}).catch(function(err){});}},{key:\"render\",value:function render(){var _this5=this;return React.createElement(\"div\",{className:\"container\",style:{\"marginTop\":2+\"em\",\"marginBottom\":2+\"em\"}},React.createElement(RegisterForm,{onSubmit:function onSubmit(student){_this5.handleSubmit(student);}}),React.createElement(RegisterTable,{list:this.state.student_list,onDelete:function onDelete(student){return _this5.handleDelete(student);}}));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/home/sofy/Escritorio/ProyectoDeclarativa/src/components/App.js"],"names":["React","RegisterForm","RegisterTable","API","App","props","state","student_list","fetch","BaseUrl","headers","Accept","then","res","json","console","log","setState","catch","err","alert","student","request","method","body","JSON","stringify","carnet","schedule","isLate","buffer_list","slice","concat","register","_id","index","find","value","splice","handleSubmit","handleDelete","Component"],"mappings":"0nBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,GAAP,KAAgB,uBAAhB,C,GAEMC,CAAAA,G,yEACF,aAAYC,KAAZ,CAAkB,qCACd,qEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,YAAY,CAAC,EADJ,CAAb,CAFc,aAKjB,C,6EAEkB,iBACfC,KAAK,WAAIL,GAAG,CAACM,OAAR,cAA4B,CAC7BC,OAAO,CAAC,CACJC,MAAM,CAAE,kBADJ,CADqB,CAA5B,CAAL,CAKKC,IALL,CAKU,SAAAC,GAAG,CAAE,CACP,MAAOA,CAAAA,GAAG,CAACC,IAAJ,EAAP,CACH,CAPL,EAQKF,IARL,CAQU,SAAAC,GAAG,CAAE,CACPE,OAAO,CAACC,GAAR,CAAYH,GAAZ,EACA,MAAI,CAACI,QAAL,CAAc,CACVV,YAAY,CAAEM,GAAG,CAACA,GAAD,CAAK,EADZ,CAAd,EAGH,CAbL,EAcKK,KAdL,CAcW,SAAAC,GAAG,CAAE,CACRC,KAAK,CAAC,iCAAD,CAAL,CACH,CAhBL,EAiBH,C,kDAEYC,O,CAAQ,iBACjB,GAAIC,CAAAA,OAAO,CAAG,CACVC,MAAM,CAAE,MADE,CAEVb,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,SAAS,kBAFL,CAFE,CAMVc,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,MAAM,CAAEN,OAAO,CAACM,MADC,CAEjBC,QAAQ,CAAEP,OAAO,CAACO,QAFD,CAGjBC,MAAM,CAAER,OAAO,CAACQ,MAHC,CAAf,CANI,CAAd,CAaArB,KAAK,WAAIL,GAAG,CAACM,OAAR,cAA4Ba,OAA5B,CAAL,CACKV,IADL,CACU,SAAAC,GAAG,CAAE,CACP,MAAOA,CAAAA,GAAG,CAACC,IAAJ,EAAP,CACH,CAHL,EAIKF,IAJL,CAIU,SAAAC,GAAG,CAAE,CACP,GAAIiB,CAAAA,WAAW,CAAG,MAAI,CAACxB,KAAL,CAAWC,YAAX,CAAwBwB,KAAxB,EAAlB,CACA,MAAI,CAACd,QAAL,CAAc,CACVV,YAAY,CAAEuB,WAAW,CAACE,MAAZ,CAAmB,CAACnB,GAAG,CAACoB,QAAL,CAAnB,CADJ,CAAd,EAGH,CATL,EAUKf,KAVL,CAUW,SAAAC,GAAG,CAAE,CACRC,KAAK,CAAC,iCAAD,CAAL,CACH,CAZL,EAaH,C,kDAEYC,O,CAAQ,iBACjB,GAAIC,CAAAA,OAAO,CAAG,CACVC,MAAM,CAAE,QADE,CAEVb,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,SAAS,kBAFL,CAFE,CAMVc,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBQ,GAAG,CAAEb,OAAO,CAACa,GADI,CAAf,CANI,CAAd,CAWA1B,KAAK,WAAIL,GAAG,CAACM,OAAR,cAA4Ba,OAA5B,CAAL,CACKV,IADL,CACU,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EADb,EAEKF,IAFL,CAEU,SAAAC,GAAG,CAAE,CACP,GAAIsB,CAAAA,KAAK,CAAG,MAAI,CAAC7B,KAAL,CAAWC,YAAX,CAAwB6B,IAAxB,CAA6B,SAAAC,KAAK,CAAE,CAC5C,MAAOA,CAAAA,KAAK,CAACH,GAAN,GAAcb,OAAO,CAACa,GAA7B,CACH,CAFW,CAAZ,CAIA,GAAIJ,CAAAA,WAAW,CAAG,MAAI,CAACxB,KAAL,CAAWC,YAAX,CAAwBwB,KAAxB,EAAlB,CACAD,WAAW,CAACQ,MAAZ,CAAmBH,KAAnB,CAA0B,CAA1B,EAEA,MAAI,CAAClB,QAAL,CAAc,CACVV,YAAY,CAAEuB,WADJ,CAAd,EAGH,CAbL,EAcKZ,KAdL,CAcW,SAAAC,GAAG,CAAE,CAEX,CAhBL,EAiBH,C,uCAEO,iBACJ,MACI,4BAAK,SAAS,CAAC,WAAf,CAA2B,KAAK,CAAE,CAAC,YAAY,EAAE,IAAf,CAAqB,eAAe,EAAE,IAAtC,CAAlC,EACI,oBAAC,YAAD,EACI,QAAQ,CAAI,kBAACE,OAAD,CAAW,CACnB,MAAI,CAACkB,YAAL,CAAkBlB,OAAlB,EACH,CAHL,EADJ,CAMI,oBAAC,aAAD,EACI,IAAI,CAAE,KAAKf,KAAL,CAAWC,YADrB,CAEI,QAAQ,CAAE,kBAACc,OAAD,QAAW,CAAA,MAAI,CAACmB,YAAL,CAAkBnB,OAAlB,CAAX,EAFd,EANJ,CADJ,CAaH,C,iBAtGarB,KAAK,CAACyC,S,EAyGxB,cAAerC,CAAAA,GAAf","sourcesContent":["import React from \"react\"\nimport RegisterForm from './RegisterForm'\nimport RegisterTable from './RegisterTable'\nimport API from '../utils/APIConstants'\n\nclass App extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            student_list:[],\n        }\n    }\n\n    componentDidMount(){\n        fetch(`${API.BaseUrl}/register`, {\n            headers:{\n                Accept: \"application/json\"\n            }\n        })\n            .then(res=>{\n                return res.json();\n            })\n            .then(res=>{\n                console.log(res)\n                this.setState({\n                    student_list: res?res:[],\n                })\n            })\n            .catch(err=>{\n                alert(\"Ocurrió un error en la conexión\");\n            })\n    }\n\n    handleSubmit(student){\n        let request = {\n            method: \"POST\",\n            headers:{\n                \"Content-type\":\"application/json\",\n                \"Accept\":\"application/json\",\n            },\n            body: JSON.stringify({\n                carnet: student.carnet,\n                schedule: student.schedule,\n                isLate: student.isLate,\n            })\n        }\n\n        fetch(`${API.BaseUrl}/register`, request)\n            .then(res=>{\n                return res.json();\n            })\n            .then(res=>{\n                let buffer_list = this.state.student_list.slice();\n                this.setState({\n                    student_list: buffer_list.concat([res.register]),\n                })\n            })  \n            .catch(err=>{\n                alert(\"Ocurrió un error en la conexión\");\n            });\n    }\n\n    handleDelete(student){\n        let request = {\n            method: \"DELETE\",\n            headers:{\n                \"Content-type\":\"application/json\",\n                \"Accept\":\"application/json\",\n            },\n            body: JSON.stringify({\n                _id: student._id,\n            }) \n        }\n\n        fetch(`${API.BaseUrl}/register`, request)\n            .then(res=>res.json())\n            .then(res=>{\n                let index = this.state.student_list.find(value=>{\n                    return value._id === student._id;\n                })\n        \n                let buffer_list = this.state.student_list.slice();\n                buffer_list.splice(index, 1);\n        \n                this.setState({\n                    student_list: buffer_list\n                });\n            })\n            .catch(err=>{\n\n            })\n    }\n    \n    render(){\n        return (\n            <div className=\"container\" style={{\"marginTop\":2+\"em\", \"marginBottom\":2+\"em\"}}>\n                <RegisterForm \n                    onSubmit = {(student)=>{\n                        this.handleSubmit(student);\n                    }}\n                />\n                <RegisterTable \n                    list={this.state.student_list}\n                    onDelete={(student)=>this.handleDelete(student)}\n                    />\n            </div>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}